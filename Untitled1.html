<!doctype html>
<html lang="zh-cmn-Hans">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="MobileOptimized" content="320">
  <meta name="HandheldFriendly" content="true">
  <meta name="format-detection" content="telephone=no, email=no">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>Document</title>
  <style type="text/css">
	.ym_alert{width:250px;border:1px solid #ccc;box-shadow:1px 1px 50px rgba(0,0,0,.3);background:#fff;position:absolute;font-size:12px;color:#666;z-index:999;
	-webkit-animation:showAlert 0.3s;-moz-animation:showAlert 0.3s;-o-animation:showAlert 0.3s;animation:showAlert 0.3s;}
	.ym_alert .title{padding:0 20px;height:40px;line-height:40px;font-family:"微软雅黑";color:#000;font-size:14px;}
	.ym_alert .content{padding:20px;font-size:14px;font-family:"微软雅黑";}
	.ym_alert .bottom{text-align:right;padding:20px 10px 10px 20px}
	.ym_alert .bottom span{display:inline-block;padding:0 20px;height:28px;line-height:28px;border-radius:4px;font-size:12px;}
	.ym_alert .bottom .close{background:#ccc;}
	.ym_alert .bottom .sure{background:#2e8ded;color:#fff;margin-right:10px;}
	.ym_overlay{position:absolute;left:0;top:0;background:#000;opacity:0.5;width:100%;height:100%;}
	.ym_loading{padding:10px 20px;border-radius:5px;box-shadow:1px 1px 50px rgba(0,0,0,.3);background:#fff;z-index:999;position:absolute;font-size:12px;font-family:"微软雅黑";animation:showAlert 0.3s;}
	@-webkit-keyframes showAlert{
		0%{
			-webkit-transform:scale(0.7);
		}
		45%{
			-webkit-transform:scale(1.05);
		}
		80%{
			-webkit-transform:scale(0.95);
		}
		100%{
			-webkit-transform:scale(1);
		}
	}
	@-moz-keyframes showAlert{
		0%{
			-moz-transform:scale(0.7);
		}
		45%{
			-moz-transform:scale(1.05);
		}
		80%{
			-moz-transform:scale(0.95);
		}
		100%{
			-moz-transform:scale(1);
		}
	}
	@-o-keyframes showAlert{
		0%{
			-o-transform:scale(0.7);
		}
		45%{
			-o-transform:scale(1.05);
		}
		80%{
			-o-transform:scale(0.95);
		}
		100%{
			-o-transform:scale(1);
		}
	}
	@keyframes showAlert{
		0%{
			transform:scale(0.7);
		}
		45%{
			transform:scale(1.05);
		}
		80%{
			transform:scale(0.95);
		}
		100%{
			transform:scale(1);
		}
	}

	.box{width:240px;font-size:12px;text-align:center;background:#fff;box-shadow:1px 1px 50px rgba(0,0,0,.3);}
	.box li, .box ul{margin:0;padding:0;}
	.box li{list-style:none;}
	.box li:last-child{padding-bottom:20px;}
	.box .title{font-size:18px;font-weight:bold;padding:20px 0;}
	.box input{width:200px;font-size:14px;padding:0 10px;outline:none;border:1px solid #e0e0e0;height:40px;line-height:40px;margin-bottom:14px;}
	.box button{width:220px;height:40px;border:none;outline:none;color:#fff;background:#81bfef;font-size:14px;margin:20px 0;}
	.box a{text-decoration:none;color:#757575;display:inline-block;padding:0 10px;}
  </style>
 </head>
 <body>
	<div id="show">点击</div>

	<div class="box" style="display:none;">
		<ul>
			<li class="title">优米账号登录</li>
			<li>
				<input type="text" placeholder="邮箱/手机号码/优米账号" />
			</li>
			<li>
				<input type="password" placeholder="密码" />
			</li>
			<li>
				<button>立即登录</button>
			</li>
			<li>
				<a href="javascript:void(0)">注册账号</a>
				<a href="javascript:void(0)">忘记密码？</a>
			</li>
		</ul>
	</div>
	<script type="text/javascript">
		(function(win,doc){
			 var utils = {
				append : function(target, str){
					var dom = typeof target === "string" ? document.querySelector(target) : target;
					var div = document.createElement("div");
					div.innerHTML = str;
					while(div.firstChild){
						dom.appendChild(div.firstChild);
					}
				},

				remove : function(target, ele){
					var dom = typeof target === "string" ? document.querySelector(target) : target;
					dom.removeChild(ele);
				},

				center : function(target){
					var width = target.offsetWidth;
					var height = target.offsetHeight;
					var width2 = window.innerWidth;
					var height2 = window.innerHeight;
					var x = (width2 - width) / 2;
					var y = (height2 - height) / 2;
					target.style.left = x + "px";
					target.style.top = y + "px";
					var _this = this;
					window.addEventListener("resize",function(){
						_this.center(target);
					},false);
				}
			 }

			win.ym_layer = {
				alert : function(msg,obj){
					this.obj = obj || {};
					this.template(msg);
					this.bindEvent();
				},
				
				template : function(message){
					var title = "<div class='title'>信息</div>";
					var content = "<div class='content'>"+ message +"</div>";
					var loading = "<div class='ym_loading'>"+ message +"</div>";
					this.loading = loading;
					var btn_close = "<span class='btn_close'></span>";
					var bottom = "<div class='bottom'><span class='sure'>确定</span></div>";
					var bottom2 = "<div class='bottom'><span class='sure'>确定</span><span class='close'>取消</span></div>";
					bottom = this.obj.type == 2 ? bottom2 : bottom;
					var alert_template = "<div class='ym_alert'>"+ title + content + bottom+"</div>";
					var overlay = "<div class='ym_overlay'></div>";
					if(this.obj.type == 1){
						utils.append("body",loading);
						this.dialog = document.querySelector(".ym_loading");
						
					}else{
						utils.append("body",alert_template);
						this.dialog = document.querySelector(".ym_alert");
					}
					
					utils.append("body",overlay);
					
					this.overlay = document.querySelector(".ym_overlay");
					utils.center(this.dialog);
				},

				bindEvent : function(){
					var dialog = this.dialog;
					var overlay = this.overlay;
					var obj = this.obj;
					if(this.obj.type != 1){
						var sure = this.dialog.querySelector(".sure");
						var cancel = this.dialog.querySelector(".close");
						var loading= this.loading;
						var timer = null;
						sure.onclick = function(){
							clearTimeout(timer);
							if(obj.sure) obj.sure(dialog);
							utils.remove("body", dialog);
							utils.append("body", loading);
							var loading2 = document.querySelector(".ym_loading");
							loading2.textContent = "确定了";
							utils.center(loading2);
							timer = setTimeout(function(){
								utils.remove("body", loading2);
								utils.remove("body", overlay);
							},800);
						};
						
						cancel.onclick = function(){
							clearTimeout(timer);
							if(obj.cancel) obj.cancel(dialog);
							utils.remove("body", dialog);
							utils.append("body", loading);
							var loading2 = document.querySelector(".ym_loading");
							loading2.textContent = "取消了";
							utils.center(loading2);
							timer = setTimeout(function(){
								utils.remove("body", loading2);
								utils.remove("body", overlay);
							},1000);
							
							
						}
					}
					this.overlay.onclick = function(){
						utils.remove("body", this);
						utils.remove("body",dialog);
					}
					
				},

				open : function(dom,obj){
					obj = obj || {};
					dom.style.animation = "showAlert 0.3s";
					dom.style.position = "absolute";
					dom.style.zIndex = "999";
					dom.style.display = "block";
					var overlay = "<div class='ym_overlay'></div>";
					utils.append("body", overlay);
					var overlayDom = document.querySelector(".ym_overlay");
					utils.center(dom);
					if(obj.callback) obj.callback(overlayDom);
				}

			};
			
		})(window,document);
		document.querySelector("#show").onclick = function(){
			/*ym_layer.alert("正在加载中...",{type:2,sure:function(){
				alert("你点击了删除按钮");
			}});*/
			var login = document.querySelector(".box");
			ym_layer.open(login,{callback:function(overlay){
				overlay.onclick = function(){
					login.style.display = "none";
					document.querySelector("body").removeChild(this);
				}
				
			}});
		}
		
	</script>
 </body>
</html>
<head>